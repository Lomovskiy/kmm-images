package com.capoax.kmmimages.core

import com.capoax.kmmimages.extensions.imageNameToConst

data class CodeGenerator(val packageName: String) {
    private val images = mutableListOf<String>()

    val result: String
        get() {
            return buildString {
                append("package $packageName\n")
                append("// Generated by CommonImages\n")
                append("data class Image(val name: String)\n")

                append("object Images {\n")
                images.map { image ->
                    "\tval ${image.imageNameToConst()}: Image = Image(\"$image\")"
                }.forEach { line ->
                    append(line)
                    append("\n")
                }
                append("}\n\n")
            }
        }

    fun addImage(name: String) {
        println("ADD IMAGE $name")
        images.add(name)
    }
}
